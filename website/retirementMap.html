<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="retirementMap.css" />
    <link rel="stylesheet" href="../interactive table/style.css" />
    <link rel="stylesheet" href="styles.css" />

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <!-- Include Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Include Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Include D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <title>Retirement Guide</title>
    <style>
      #charts-container {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
      }
      .chart-container {
        width: 45%;
      }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#benefits">Benefits</a></li>
        <li><a href="#map">Map</a></li>
        <li><a href="#state-ranking">Rank</a></li>

        <li><a href="#find">Find your Home</a></li>
      </ul>
    </nav>

    <section id="hero" class="hero">
      <div class="hero-left">
        <h1>Discover the Best Places to Retire in the U.S.</h1>
        <p>Analyze, Compare, and Plan Your Retirement with Confidence.</p>
        <p class="author">
          Lakshay Garg, Cristian Waitman, Christopher Swires, Phung Huynh,
          Dahlia Segarra
        </p>
        <div class="hero-buttons">
          <div class="button">
            <a href="#" class="btn btn-primary">Explore Rankings</a>
          </div>
          <div class="button">
            <a href="#overview" class="btn btn-secondary">Learn More</a>
          </div>
        </div>
      </div>
      <div class="hero-right">
        <img
          class="hero-img"
          src="https://images.unsplash.com/photo-1551559347-b2df2a690bd5?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NDV8fHJldGlyZW1lbnR8ZW58MHx8MHx8fDA%3D"
        />
      </div>
    </section>
    <section id="overview" class="overview">
      <div class="container">
        <h2>Why Choose Your Retirement Destination Wisely?</h2>
        <div class="content">
          <div class="text-section">
            <h3>Problem Statement</h3>
            <p>
              Retirement is a significant life stage, and choosing the right
              location can affect your quality of life.
            </p>
            <h3>Solution</h3>
            <p>
              Our platform evaluates U.S. locations based on cost of living,
              healthcare, safety, and climate, helping you make informed
              decisions.
            </p>
            <div class="stats">
              <p>
                ðŸ“Š The average retiree spends 50% of their income on housing and
                healthcare.
              </p>
            </div>
          </div>
          <div class="visual-section">
            <div class="icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/2331/2331970.png"
                alt="Cost of Living Icon"
              />
              <p>Cost of Living</p>
            </div>
            <div class="icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/1828/1828843.png"
                alt="Safety Icon"
              />
              <p>Safety</p>
            </div>
            <div class="icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/2942/2942921.png"
                alt="Healthcare Icon"
              />
              <p>Healthcare</p>
            </div>
            <div class="icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/869/869869.png"
                alt="Weather Icon"
              />
              <p>Weather</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="how-it-works">
      <div class="container">
        <h2>How It Works</h2>
        <div class="steps">
          <div class="step">
            <img
              src="https://cdn-icons-png.flaticon.com/512/748/748067.png"
              alt="Data Collection Icon"
            />
            <h3>Step 1: Gather Data</h3>
            <p>
              We collect the latest data on cost of living, healthcare, safety,
              and climate from reliable sources.
            </p>
          </div>
          <div class="step">
            <img
              src="https://cdn-icons-png.flaticon.com/512/2088/2088617.png"
              alt="Data Analysis Icon"
            />
            <h3>Step 2: Analyze Factors</h3>
            <p>
              Our algorithm evaluates multiple factors to provide a balanced
              comparison.
            </p>
          </div>
          <div class="step">
            <img
              src="https://cdn-icons-png.flaticon.com/512/3126/3126249.png"
              alt="Visualization Icon"
            />
            <h3>Step 3: Visualize Results</h3>
            <p>
              Explore interactive maps and charts to find the ideal retirement
              location for you.
            </p>
          </div>
        </div>
        <div class="button">
          <a href="#explore" class="btn btn-primary"
            >Start Exploring Rankings</a
          >
        </div>
      </div>
    </section>

    <section id="benefits" class="benefits">
      <div class="container">
        <h2>Why Use Our Platform?</h2>
        <div class="benefit-list">
          <div class="benefit">
            <img
              src="https://cdn-icons-png.flaticon.com/512/3500/3500833.png"
              alt="Affordable Decisions"
            />
            <h3>Affordable Decisions</h3>
            <p>
              Save time and money by finding locations that match your
              retirement goals.
            </p>
          </div>
          <div class="benefit">
            <img
              src="https://cdn-icons-png.flaticon.com/512/847/847969.png"
              alt="Personalized Results"
            />
            <h3>Personalized Results</h3>
            <p>
              Adjust filters to reflect your preferences and get tailored
              recommendations.
            </p>
          </div>
          <div class="benefit">
            <img
              src="https://cdn-icons-png.flaticon.com/512/2749/2749704.png"
              alt="Comprehensive Analysis"
            />
            <h3>Comprehensive Analysis</h3>
            <p>
              Data-backed insights into cost of living, healthcare, safety, and
              weather.
            </p>
          </div>
          <div class="benefit">
            <img
              src="https://cdn-icons-png.flaticon.com/512/4247/4247567.png"
              alt="Interactive Tools"
            />
            <h3>Interactive Tools</h3>
            <p>
              Explore maps and charts to visualize the best retirement options.
            </p>
          </div>
        </div>
        <div class="button">
          <a href="#get-started" class="btn btn-primary"
            >Try Our Platform Today!</a
          >
        </div>
      </div>
    </section>

    <section id="map" class="state-graphs">
      <h1 class="map-title">Interactive Retirement Map</h1>
      <p class="map-description">
        Explore retirement rankings across the U.S. with insights into
        healthcare, food costs, housing, and crime rates.
      </p>
      <div
        id="us-map"
        style="height: 500px; border-radius: 10px; width: 1200px"
      ></div>
    </section>
    <section id="state-graphs-container">
      <h1 id="state-name" class="map-title"></h1>

      <div id="state-graphs" class="state-graphs">
        <div class="chart-container" id="bar-chart-container"></div>
      </div>
      <div id="weather-stats">
        <h1>Weather Data by Month</h1>
        <div id="weather-plot"></div>
        <div id="plot"></div>
      </div>
    </section>
    <div id="state-ranking" class="interactive-table">
      <h1>State Rankings</h1>
      <table id="table">
        <thead id="table-head"></thead>
        <tbody id="table-body"></tbody>
      </table>
    </div>
    <section id="find" style="flex-direction: row; margin-top: 340px">
      <div id="data-section" class="data-section">
        <div class="container">
          <h2>Data Table</h2>
          <div id="data-table"></div>
        </div>
      </div>

      <!-- Drag-and-Drop Section -->
      <div id="drag-drop-section" class="drag-drop-section">
        <div class="container">
          <h2>Customize Your Rankings</h2>
          <p>Drag and drop the columns to change the ranking criteria.</p>
          <div id="sortable-container" class="sortable-container"></div>
          <div id="weights-container" class="weights-container"></div>

          <button id="apply-sorting" class="btn">Apply Sorting</button>
        </div>
      </div>
    </section>

    <script src="retirementMapLogic.js"></script>
    <script src="../interactive table/logic.js"></script>
    <script src="script.js"></script>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Select all navigation links
      const navLinks = document.querySelectorAll("nav ul li a");

      // Add click event to each navigation link
      navLinks.forEach((link) => {
        link.addEventListener("click", (event) => {
          event.preventDefault(); // Prevent default anchor behavior
          const targetId = link.getAttribute("href").substring(1); // Get the target section ID
          const targetElement = document.getElementById(targetId);

          if (targetElement) {
            // Scroll to the target element smoothly
            targetElement.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });
    });
    // Fetch the CSV data
    let parsedWeatherData = []; // Declare globally
    let weatherMonths = []; // Declare globally

    // Fetch weather data once during page load
    fetch("../Resources/state_average_temperature_2023_all_states.csv")
      .then((response) => response.text())
      .then((data) => {
        const rows = data.split("\n"); // Split the CSV data by rows
        weatherMonths = rows[0].split(",").slice(1); // Extract months from the header row

        for (let i = 1; i < rows.length; i++) {
          const cols = rows[i].split(",");
          const state = cols[0];
          const stateData = { state };

          for (let j = 1; j < cols.length; j++) {
            stateData[weatherMonths[j - 1]] = parseFloat(cols[j]); // Store temperature data
          }

          parsedWeatherData.push(stateData); // Populate the global array
        }
      })
      .catch((err) => console.error("Error loading weather data:", err));

    function updateWeatherChart(selectedState) {
      if (!parsedWeatherData || parsedWeatherData.length === 0) {
        console.error("Weather data not loaded yet.");
        return;
      }

      const stateData = parsedWeatherData.find(
        (data) => data.state === selectedState
      );

      if (!stateData) {
        console.error("Weather data not found for the state:", selectedState);
        return;
      }

      const xData = weatherMonths; // Months
      const yData = weatherMonths.map((month) => stateData[month]); // Corresponding temperatures

      const trace = {
        x: xData,
        y: yData,
        type: "bar",
        marker: {
          color: "#36A2EB",
        },
      };

      const layout = {
        title: `Monthly Average Temperatures for ${selectedState}`,
        xaxis: { title: "Month" },
        yaxis: { title: "Temperature (Â°F)" },
      };

      Plotly.newPlot("weather-plot", [trace], layout);
    }
  </script>
</html>
